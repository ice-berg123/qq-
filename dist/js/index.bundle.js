(()=>{"use strict";const e=async function(e){const t="http://124.221.249.219:8000/api"+e;return(await fetch(t)).json()},t=document.body.clientWidth/100,l=(document.body.clientHeight,document.querySelectorAll(".nav_sort"));l.forEach((e=>{e.addEventListener("click",(()=>{l.forEach(((e,t)=>{e.style.color="rgb(168,168,168)",e.lastElementChild.style.visibility="hidden"})),e.style.color="rgb(34,213,156)",e.lastElementChild.style.visibility="visible"}))}));const n=document.querySelector(".recommend_page"),i=document.querySelector(".chart_page");l[0].addEventListener("click",(()=>{n.style.display="block",i.style.display="none"})),l[1].addEventListener("click",(()=>{n.style.display="none",i.style.display="block"}));const s=document.querySelector(".unsearch"),c=document.querySelector(".onsearch"),d=document.querySelector(".searchwait"),o=document.querySelector(".searching"),a=document.querySelector(".cancle_search"),r=document.querySelectorAll(".search_page"),y=document.querySelector(".recommend_sheet"),h=(document.querySelectorAll(".hot_item"),document.querySelectorAll(".history_item"),document.querySelector(".history_list")),u=document.querySelector("#InputSearch"),m=document.querySelector(".search_list"),p=document.querySelector(".delete1"),v=document.querySelector(".delete2");function _(){""==u.value?p.style.display="none":p.style.display="block",d.style.display="none",o.style.display="block"}async function x(t){let l=0;if(0!=h.children.length)for(let e=0;e<h.children.length;e++)console.log(t==h.children[e].textContent),t==h.children[e].textContent&&(l=1);if(1!=l){m.innerHTML="";const e=document.createElement("div");e.className="history_item",e.textContent=t,h.appendChild(e),e.addEventListener("click",(()=>{u.value=e.textContent,x(e.textContent)}))}0!=h.children.length&&(r[0].style.display="block");const n=await e(`/search?keyword=${t}`);m.style.display="flex",n.forEach((e=>{const t=document.createElement("div");t.innerHTML="<div class='search_item_title'></div><div class='search_item_author'></div>",t.className="search_item",m.appendChild(t),t.children[0].textContent=e.title;let l="";e.artist.forEach(((e,t)=>{l+=0==t?e:" · "+e})),t.children[1].textContent=l,r[0].style.display="none",r[1].style.display="none"}))}document.querySelectorAll(".chart_list"),u.addEventListener("keypress",(function(e){13===e.keyCode&&x(u.value)})),s.addEventListener("click",(()=>{s.style.display="none",c.style.display="block",d.style.display="none",o.style.display="block",r[1].style.display="block",y.style.display="none",0!=h.children.length&&(r[0].style.display="block")})),a.addEventListener("click",(()=>{s.style.display="flex",c.style.display="none",d.style.display="none",o.style.display="none",r[1].style.display="none",r[0].style.display="none",y.style.display="block",m.style.display="none",u.value=""})),d.addEventListener("click",(()=>{_()})),o.children[1].addEventListener("blur",(()=>{""==o.children[1].value&&(d.style.display="flex",o.style.display="none")})),p.addEventListener("click",(()=>{u.value="",m.style.display="none",r[1].style.display="block",r[0].style.display="block"})),u.addEventListener("input",(()=>{""==u.value?p.style.display="none":p.style.display="block"})),v.addEventListener("click",(()=>{h.innerHTML="",r[0].style.display="none"})),async function(){!async function(){const t=document.querySelector(".hot_list");(await e("/hot")).forEach((e=>{const l=document.createElement("div");l.className="hot_item",l.textContent=e,t.appendChild(l),l.addEventListener("click",(()=>{u.value=l.textContent,_(),x(l.textContent)}))}))}(),async function(){const l=document.querySelector(".chart_page"),n=await e("/ranking");n.forEach(((e,n)=>{const i=document.createElement("div");let s,c,d,o;i.className="chart_list",i.innerHTML="<div class='chart_list_left'><div class='chart_title'></div><div class='chart_item_box'><div class='chart_item'><div class='chart_item_index'>1.</div><div class='song_name'></div><div class='song_author'></div></div></div><div class='chart_item_box'><div class='chart_item'><div class='chart_item_index'>2.</div><div class='song_name'></div><div class='song_author'></div></div></div><div class='chart_item_box'><div class='chart_item'><div class='chart_item_index'>3.</div><div class='song_name'></div><div class='song_author'></div></div></div></div><div class='chart_list_right'><img class='chart_img' src='../../picture/song.jpg' alt=''><div class='week_update'></div><div class='numbers'></div></div>",i.index=n,l.appendChild(i);let a=0;i.addEventListener("touchstart",(e=>{i.style.backgroundColor="rgb(255,255,255)",d=e.touches[0].pageY,o=i.style.top;let t=255;c=new Date,s=setInterval((()=>{t-=2,i.style.backgroundColor=`rgb(${t},${t},${t})`}),50),setTimeout((()=>{clearInterval(s)}),500),c=new Date})),i.addEventListener("touchmove",(e=>{clearInterval(s);let o=new Date;if(o-c>500){i.style.zIndex=20;let s=e.touches[0].pageY-d;i.style.top=function(e){return""==e&&(e="0px"),e}(i.style.top),console.log(i.offsetTop,i.index,n,parseInt(i.style.top),i.style.top,15*t),0==i.index&&s<0||i.index==l.children.length-1&&s>0||(i.style.top=parseInt(i.style.top)+s+"px"),d=e.touches[0].pageY,(parseInt(i.style.top)>15*t||parseInt(i.style.top)<-15*t)&&0==a&&(parseInt(i.style.top)>0?(l.children[i.index+1].style.top=-34.9*t+"px",l.children[i.index+1].index--):(l.children[i.index-1].style.top=34.9*t+"px",l.children[i.index-1].index++),a=1),e.preventDefault()}else c=o})),i.addEventListener("touchend",(e=>{if(clearInterval(s),a=0,parseInt(i.style.top)>15*t||parseInt(i.style.top)<-15*t){console.log(parseInt(i.style.top));let e=l.removeChild(l.children[i.index]);parseInt(i.style.top)>0?(l.insertBefore(e,l.children[i.index+1]),l.children[i.index+1].style.top="",l.children[i.index].style.top="",i.index++):(l.insertBefore(e,l.children[i.index-1]),l.children[i.index-1].style.top="",l.children[i.index].style.top="",i.index--)}i.style.top=o,i.style.zIndex=0,i.style.backgroundColor="rgb(255,255,255)"}))})),n.forEach(((e,t)=>{const l=document.querySelectorAll(".chart_title"),n=document.querySelectorAll(".song_name"),i=document.querySelectorAll(".song_author"),s=document.querySelectorAll(".week_update"),c=document.querySelectorAll(".numbers");document.querySelectorAll(".chart_img")[t].src=e.cover,l[t].textContent=e.title,s[t].textContent=`每${e.update_frequence}更新`,c[t].textContent=(e.views/1e4).toFixed(1)+"万";for(let l=0;l<3;l++){n[3*t+l].textContent=e.top3[l].title+"-";let s="";e.top3[l].artist.forEach(((e,t)=>{s+=0==t?e:` / ${e}`})),i[3*t+l].textContent=s}}))}(),async function(){const t=await e("/recommendations"),l=document.querySelectorAll(".sheet_box");t.offical.forEach(((e,n)=>{const i=document.createElement("div");i.className="sheet_item",i.innerHTML="<img class='sheet_item_img' src='../../picture/song.jpg' alt=''><div class='sheet_numbers'>555万</div><div class='sheet_tiem_title'>大大大</div>",i.children[0].src=t.offical[n].cover,i.children[1].textContent=(t.offical[n].views/1e4).toFixed(1)+"万",i.children[2].textContent=t.offical[n].title,l[0].appendChild(i)})),t.tatsujin.forEach(((e,n)=>{const i=document.createElement("div");i.className="sheet_item",i.innerHTML="<img class='sheet_item_img' src='../../picture/song.jpg' alt=''><div class='sheet_numbers'>555万</div><div class='sheet_tiem_title'>大大大</div>",i.children[0].src=t.tatsujin[n].cover,i.children[1].textContent=(t.tatsujin[n].views/1e4).toFixed(1)+"万",i.children[2].textContent=t.tatsujin[n].title,l[1].appendChild(i)})),t.column.forEach(((e,n)=>{const i=document.createElement("div");i.className="sheet_item",i.innerHTML="<div class='sheet_big_box'><div class='sheet_mid_box'><div class='sheet_small_picture'></div><div class='column_name'></div></div><div class='sheet_decoration'></div></div>",i.children[0].children[0].style.backgroundImage=`url(${t.column[n].background})`,i.children[0].children[0].children[0].style.backgroundImage=`url(${t.column[n].icon})`,i.children[0].children[0].children[1].textContent=t.column[n].title,i.children[0].children[1].textContent=t.column[n].description,l[2].appendChild(i)}))}()}()})();
//# sourceMappingURL=index.bundle.js.map