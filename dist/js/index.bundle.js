(()=>{"use strict";const e=async function(e){const t="http://124.221.249.219:8000/api"+e;return(await fetch(t)).json()},t=document.body.clientWidth/100,l=(document.body.clientHeight,document.querySelectorAll(".nav_sort"));l.forEach((e=>{e.addEventListener("click",(()=>{l.forEach(((e,t)=>{e.style.color="rgb(168,168,168)",e.lastElementChild.style.visibility="hidden"})),e.style.color="rgb(34,213,156)",e.lastElementChild.style.visibility="visible"}))}));const n=document.querySelector(".recommend_page"),s=document.querySelector(".chart_page");l[0].addEventListener("click",(()=>{n.style.display="block",s.style.display="none"})),l[1].addEventListener("click",(()=>{n.style.display="none",s.style.display="block"}));const i=document.querySelector(".unsearch"),c=document.querySelector(".onsearch"),o=document.querySelector(".searchwait"),d=document.querySelector(".searching"),a=document.querySelector(".cancle_search"),r=document.querySelectorAll(".search_page"),y=document.querySelector(".recommend_sheet"),h=(document.querySelectorAll(".hot_item"),document.querySelectorAll(".history_item"),document.querySelector(".history_list")),u=document.querySelector("#InputSearch"),p=document.querySelector(".search_list"),m=document.querySelector(".delete1"),v=document.querySelector(".delete2");function _(){""==u.value?m.style.display="none":m.style.display="block",o.style.display="none",d.style.display="block"}async function f(t){let l=0;if(0!=h.children.length)for(let e=0;e<h.children.length;e++)t==h.children[e].textContent&&(l=1);if(1!=l){p.innerHTML="";const e=document.createElement("div");e.className="history_item",e.textContent=t,h.appendChild(e),e.addEventListener("click",(()=>{u.value=e.textContent,f(e.textContent)}))}0!=h.children.length&&(r[0].style.display="block");const n=await e(`/search?keyword=${t}`);p.style.display="flex",n.forEach((e=>{const t=document.createElement("div");t.innerHTML="<div class='search_item_title'></div><div class='search_item_author'></div>",t.className="search_item",p.appendChild(t),t.children[0].textContent=e.title;let l="";e.artist.forEach(((e,t)=>{l+=0==t?e:" · "+e})),t.children[1].textContent=l,r[0].style.display="none",r[1].style.display="none"}))}document.querySelectorAll(".chart_list"),u.addEventListener("keypress",(function(e){13===e.keyCode&&f(u.value)})),i.addEventListener("click",(()=>{i.style.display="none",c.style.display="block",o.style.display="none",d.style.display="block",r[1].style.display="block",y.style.display="none",0!=h.children.length&&(r[0].style.display="block")})),a.addEventListener("click",(()=>{i.style.display="flex",c.style.display="none",o.style.display="none",d.style.display="none",r[1].style.display="none",r[0].style.display="none",y.style.display="block",p.style.display="none",u.value=""})),o.addEventListener("click",(()=>{_()})),d.children[1].addEventListener("blur",(()=>{""==d.children[1].value&&(o.style.display="flex",d.style.display="none")})),m.addEventListener("click",(()=>{u.value="",p.style.display="none",r[1].style.display="block",r[0].style.display="block"})),u.addEventListener("input",(()=>{""==u.value?m.style.display="none":m.style.display="block"})),v.addEventListener("click",(()=>{h.innerHTML="",r[0].style.display="none"})),async function(){!async function(){const t=document.querySelector(".hot_list");(await e("/hot")).forEach((e=>{const l=document.createElement("div");l.className="hot_item",l.textContent=e,t.appendChild(l),l.addEventListener("click",(()=>{u.value=l.textContent,_(),f(l.textContent)}))}))}(),async function(){const l=document.querySelector(".chart_page"),n=await e("/ranking");n.forEach(((e,n)=>{const s=document.createElement("div");let i,c,o,d;s.className="chart_list",s.innerHTML="<div class='chart_list_left'><div class='chart_title'></div><div class='chart_item_box'><div class='chart_item'><div class='chart_item_index'>1.</div><div class='song_name'></div><div class='song_author'></div></div></div><div class='chart_item_box'><div class='chart_item'><div class='chart_item_index'>2.</div><div class='song_name'></div><div class='song_author'></div></div></div><div class='chart_item_box'><div class='chart_item'><div class='chart_item_index'>3.</div><div class='song_name'></div><div class='song_author'></div></div></div></div><div class='chart_list_right'><img class='chart_img' src='../../picture/song.jpg' alt=''><div class='week_update'></div><div class='numbers'></div></div>",s.index=n,l.appendChild(s);let a=0,r="none";s.addEventListener("touchstart",(e=>{s.style.backgroundColor="rgb(255,255,255)",o=e.touches[0].pageY,d=s.style.top;let t=255;c=new Date,i=setInterval((()=>{t-=2,s.style.backgroundColor=`rgb(${t},${t},${t})`}),50),setTimeout((()=>{clearInterval(i)}),500),c=new Date})),s.addEventListener("touchmove",(e=>{clearInterval(i);let n=new Date;if(n-c>500){s.style.zIndex=20;let n=e.touches[0].pageY-o;s.style.top=function(e){return""==e&&(e="0px"),e}(s.style.top),s.offsetTop<0||s.offsetTop+s.offsetHeight>l.offsetHeight?s.offsetTop<=0?s.style.top=parseInt(s.style.top)+1+"px":s.offsetTop+s.offsetHeight>=l.offsetHeight&&(s.style.top=parseInt(s.style.top)-1+"px"):s.style.top=parseInt(s.style.top)+n+"px",o=e.touches[0].pageY,(parseInt(s.style.top)>15*t||parseInt(s.style.top)<-15*t)&&0==a&&(parseInt(s.style.top)>=0?(r="down",l.children[s.index+1].style.top=-34.9*t+"px",l.children[s.index+1].index--,console.log(3)):(r="up",l.children[s.index-1].style.top=34.9*t+"px",l.children[s.index-1].index++,console.log(4)),a=1),e.preventDefault()}else c=n})),s.addEventListener("touchend",(e=>{if(clearInterval(i),a=0,parseInt(s.style.top)>15*t||parseInt(s.style.top)<-15*t){let e=l.removeChild(l.children[s.index]);"down"==r?(l.insertBefore(e,l.children[s.index+1]),l.children[s.index+1].style.top="",l.children[s.index].style.top="",s.index++,console.log(1)):"up"==r&&(l.insertBefore(e,l.children[s.index-1]),l.children[s.index-1].style.top="",l.children[s.index].style.top="",s.index--,console.log(2))}r="none",s.style.top=d,s.style.zIndex=0,s.style.backgroundColor="rgb(255,255,255)"}))})),n.forEach(((e,t)=>{const l=document.querySelectorAll(".chart_title"),n=document.querySelectorAll(".song_name"),s=document.querySelectorAll(".song_author"),i=document.querySelectorAll(".week_update"),c=document.querySelectorAll(".numbers");document.querySelectorAll(".chart_img")[t].src=e.cover,l[t].textContent=e.title,i[t].textContent=`每${e.update_frequence}更新`,c[t].textContent=(e.views/1e4).toFixed(1)+"万";for(let l=0;l<3;l++){n[3*t+l].textContent=e.top3[l].title+"-";let i="";e.top3[l].artist.forEach(((e,t)=>{i+=0==t?e:` / ${e}`})),s[3*t+l].textContent=i}}))}(),async function(){const t=await e("/recommendations"),l=document.querySelectorAll(".sheet_box");t.offical.forEach(((e,n)=>{const s=document.createElement("div");s.className="sheet_item",s.innerHTML="<img class='sheet_item_img' src='../../picture/song.jpg' alt=''><div class='sheet_numbers'>555万</div><div class='sheet_tiem_title'>大大大</div>",s.children[0].src=t.offical[n].cover,s.children[1].textContent=(t.offical[n].views/1e4).toFixed(1)+"万",s.children[2].textContent=t.offical[n].title,l[0].appendChild(s)})),t.tatsujin.forEach(((e,n)=>{const s=document.createElement("div");s.className="sheet_item",s.innerHTML="<img class='sheet_item_img' src='../../picture/song.jpg' alt=''><div class='sheet_numbers'>555万</div><div class='sheet_tiem_title'>大大大</div>",s.children[0].src=t.tatsujin[n].cover,s.children[1].textContent=(t.tatsujin[n].views/1e4).toFixed(1)+"万",s.children[2].textContent=t.tatsujin[n].title,l[1].appendChild(s)})),t.column.forEach(((e,n)=>{const s=document.createElement("div");s.className="sheet_item",s.innerHTML="<div class='sheet_big_box'><div class='sheet_mid_box'><div class='sheet_small_picture'></div><div class='column_name'></div></div><div class='sheet_decoration'></div></div>",s.children[0].children[0].style.backgroundImage=`url(${t.column[n].background})`,s.children[0].children[0].children[0].style.backgroundImage=`url(${t.column[n].icon})`,s.children[0].children[0].children[1].textContent=t.column[n].title,s.children[0].children[1].textContent=t.column[n].description,l[2].appendChild(s)}))}()}()})();
//# sourceMappingURL=index.bundle.js.map